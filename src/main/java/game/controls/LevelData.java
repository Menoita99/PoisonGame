package game.controls;

import java.util.Random;

public class LevelData {

	private static LevelData INSTANCE;
	
	

	private final String[] LEVEL1 = new String[] {
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000001111111110000000000000000000000000000",
			"000000000000300000000000001111110000000000030000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000300000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000011110000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000001010000000000000000011110020111000000000000000000",
			"000000000000000011111100000000000000001111111100000000000000000000",
			"000000000000000000000000000000000000000011111000000000000000000000",
			"000000000000411110000000000000011110000000000000001111000000000000",
			"560000000001110000000000000011110000000000000000111110200010000000",
			"111111111111100000001111100000000000001000111111111111110000000000",
			"000000000000000000111100000000000000000000000000000000000100041111",
			"000000000000000000000000000000000000000000000000000000000111111100",
			"-00000000000000000000000000000000000000000000000000000000000000000"
	};

	private final String[] LEVEL2 = new String[] {
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000001111111",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000011110000000000",
			"000000000300011000000011100000000000000000000000000000000000000000",
			"000000000000001111111110000000000000000011111000000000000000000000",
			"000000000000000000000000000000000000001111111100000000000000000000",
			"000000000000000000000000000000000000000011111000000000000000000000",
			"000000000000011110000000000000011110000000000000001111000000000000",
			"000000000000000000000000000001111111110000000000000000000000000000",
			"560000000000000000000000001111110000000000000000000000000000000000",
			"111111111111100000001111100000000000001000111111111111110000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"000000000000000000000000000000000000000000000000000000000000000000",
			"-00000000000000000000000000000000000000000000000000000000000000000"
	};

	public static LevelData getInstance() {
		if(INSTANCE == null)INSTANCE = new LevelData();
		return INSTANCE;
	}

	public String[] getLevel(int i) {
		switch (i) {
		case 1:
			return fusion(LEVEL1, hellGenerator(LEVEL1[0].length()));
		case 2:
			return fusion(LEVEL2, hellGenerator(LEVEL2[0].length()));
		default:
			String[] generated = levelGenerator(20, 250);
			return fusion(generated, hellGenerator(generated[0].length()));
		}
	}
	
	
	
	//generator very simple don't have in count map coherence
	private String[] levelGenerator(int rows, int columns) {
		String[] level = new String[rows];
		for (int i = 0; i < rows; i++) {
			String col = "";
			
			for (int j = 0; j < columns; j++) {
				col+= new Random().nextDouble()/i<0.007 ? "1" : "0";
				if(col.charAt(j) == '0' &&  new Random().nextDouble()<0.001)
					col = new StringBuilder(col).replace(j, j, "2").toString();
					
			}
			level[i]=col;
		}
		
		return level;
	}
	
	
	
	/**
	 * Generates hell level
	 */
	private String[] hellGenerator(int columns) {
		
		return fusion(blankSpace(columns,20), levelGenerator(18, columns));
	}
	
	
	

	/**
	 * This method puts array2 after array1 and output a single array with 
	 * values from the 2 arrays
	 */
	public static String[] fusion(String[] array1, String[] array2) {
		String[] output =  new String[array1.length+array2.length];

		for (int i = 0; i < array1.length; i++) 
			output[i] = array1[i];

		for (int i = array1.length; i-array1.length < array2.length; i++) 
			output[i] = array2[i-array1.length];

		return output;
	}
	
	
	
	
	/**
	 * Produces rows of blackSpaces
	 */
	public static String[] blankSpace(int columns, int spaces) {
		String[] output = new String[spaces];
		for(int i = 0; i < spaces ; i++) {
			String blank = "";
			for(int j = 0; j < columns ; j++)
				blank+= "0";
			output[i] = blank;
		}
		return output;
	}
	
}